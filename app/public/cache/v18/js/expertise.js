/*!
 * Name: ibm.com v18 production file
 * Release: 40.0.0
 * Built: 2015-11-11 12:22:25 PM EST
 * Owner: Corporate Webmaster (NUS_N_NIWWW)
 * Copyright (c) 2015 IBM Corporation
 * Description: Official file for production use
 */
(function(c,d){var g=d.namespace(d,"common.widget.expertise"),l=[],b={data:{},ready:false,numProfiles:0},a="//1.www.s81c.com/i/v17/expertise/blankPhoto.gif";function j(m){if(console.timeStamp){console.timeStamp(m)}}function h(q,r){var s={type:"",userid:""},o=d.common.util.config.get("expertise"),p=e(o.expertid)||"",n=o.expertiseid||"",m=o.listid||"";if(q==="profile"){if(n!==""){s.type="expertsByExpertise";s.id=n}else{if(m!==""){s.type="expertsByList";s.listid=m}else{if(p!==""){s.type="getExpertProfile";s.userid=p}}}}else{if(q==="blog"){s.type="getBlogs";s.blogUrl=r.toString()}}return s}function i(){j("EL data is all ready");if(b.numProfiles===0){console.warn("No experts were returned from the request.");if(b.data.Error){console.warn(b.data.Error)}return}var m=new f();m.init();j("EL just finished init")}function k(o){var p=c.trim(o.picUrl),m=c.trim(o.alt_pic_url),n="data:image/jpeg;base64,",q=c.trim(o.imageData);if(m!==""){p=(m==="base64"&&q!=="")?n+q:m}if(p===""){p=a}return p}function e(n){var m=n;if(typeof m==="object"){m="";c.each(n,function(){m+=";"+this});m=m.substr(1)}return m}g.autoInit=function(){if(d.common.util.config.isEnabled("expertise")){g.init()}};g.init=function(){var m=h("profile");IBMCore.common.util.coreservices.makeRequest("200","IBMCore.common.widget.expertise.profileRequestCallback",m);IBMCore.common.util.data.get("expertlocator");j("EL requested data");d.common.util.queue.push(function(){return d.common.translations.data.expertlocator&&b.ready===true},function(){i()});j("EL data listener set")};g.profileRequestCallback=function(m){b.data=m;b.ready=true;if(m.ExpertProfiles){b.numProfiles=m.ExpertProfiles.length}};function f(){var q=this,n={applied:{},defaults:{aboutmedisplay:"full",blogdisplay:"",displaytype:"one",noheader:false,nolinks:false,noterms:false,placeat:"expertWidget"}},s=d.common.translations.data.expertlocator,m=[];n.applied=c.extend(true,{},n.defaults,d.common.util.config.get("expertise"));m=o();q.init=function(){var u="",v;c.each(b.data.ExpertProfiles,function(){var w=new r(this);w.init();l.push(w)});if(n.applied.displaytype==="one"){c.each(l,function(w){c("#"+m[w]).html(this.html).find(".ibm-show-hide").showhide().removeClass("ibm-hide")})}else{if(n.applied.displaytype==="multi"){c.each(l,function(){u+=this.html});v=c("#"+m).html('<div class="ibm-el-widget-container">'+p()+t()+u+"</div>").children(".ibm-el-widget-container");c(".ibm-show-hide.ibm-hide",v).showhide().removeClass("ibm-hide");c(".ibm-el-widget-expert:not(:first)",v).addClass("ibm-hide");c(".ibm-el-carousel-body",v).carousel({slidesToShow:3});c(".ibm-el-carousel-body a.slick-slide",v).click(function(w){var x=c(this).data("expertid");w.preventDefault();c(".ibm-el-widget-expert",v).addClass("ibm-hide").siblings("#expert-"+x).removeClass("ibm-hide")})}}};function p(){var u="";if(n.applied.noheader===false&&n.applied.displaytype==="multi"){u='\n<h3 class="ibm-el-heading ibm-h4 ibm-bold ibm-rule">'+(b.numProfiles>1?s.experts_topic:s.expert_topic)+"</h3>"}return u}function t(){var u="";if(b.numProfiles<2){return u}c.each(l,function(){var v=k(this.data);u+='<a class="ibm-el-expert-thumb" data-expertid="'+this.data.userId+'" href="#"><img class="ibm-resize" src="'+v+'" width="40" height="40" alt="'+this.data.firstName+" "+this.data.lastName+'" /></a>'});return'<div class="ibm-el-carousel-experts"><div class="ibm-el-carousel-body">'+u+"</div></div>"}function o(){var v=n.applied.placeat,u;if(typeof v!=="object"){v=[];if(n.applied.placeat.indexOf(";")>-1){u=n.applied.placeat.split(";");c.each(u,function(){v.push(this)})}else{v.push(n.applied.placeat)}}return v}function r(v){var A=this,F={heading:"",expertInfoContainer:"",aboutContainer:"",activityContainer:"",linksContainer:"",termsContainer:""},C=[],w=[];A.data=v;A.html="";function H(){var I='<div class="ibm-el-widget-expert" id="expert-'+A.data.userId+'">'+F.headingContainer+F.expertInfoContainer+F.aboutContainer+F.activityContainer+F.linksContainer+F.termsContainer+"</div>";return I}A.init=function(){F.headingContainer=G();F.expertInfoContainer=B();F.aboutContainer=x();F.activityContainer=D();F.linksContainer=z();F.termsContainer=E();A.html=H()};function G(){var I="";if(n.applied.noheader===false&&n.applied.displaytype==="one"){I='\n<h3 class="ibm-el-heading ibm-h4 ibm-bold ibm-rule">'+s.expert_topic+"</h3>"}return I}function B(){var I="",O=k(A.data),M="",K="",N="",J="",L="";M='\n\t<div class="ibm-el-info-image"><p><img class="ibm-downsize" src="'+O+'" width="160" height="160" alt="'+A.data.firstName+" "+A.data.lastName+'" /></p></div>';N=A.data.jobrole!==""?"<br />"+A.data.jobrole:"";K='\n\t<div class="ibm-el-info-name"><p><span class="ibm-bold">'+A.data.firstName+" "+A.data.lastName+"</span>"+N+"</p></div>";J=A.data.email!==""?'\n\t<div class="ibm-el-info-email"><p class="ibm-ind-link"><a class="ibm-email-link" href="mailto:'+A.data.email+'">'+A.data.email+"</a></p></div>":"";L=u();I=M+K+J+L;I='\n<div class="ibm-el-expertinfo">'+I+"\n</div>";return I}function u(){var I="";c.each(A.data.links,function(){var K="",J=this.linkname.indexOf("||")>0?this.linkname.split("||")[0]:this.linkname;switch(J){case"blog":K="ibm-forward-link";break;case"email":K="ibm-email-link";break;case"facebook":K="ibm-facebook-encircled-link";break;case"feed":K="ibm-forward-link";break;case"Google+":K="ibm-googleplus-encircled-link";break;case"linkedin":K="ibm-linkedin-encircled-link";break;case"linkedIn":K="ibm-linkedin-encircled-link";break;case"twitter":K="ibm-twitter-encircled-link";break;default:if(this.recent_act_flag!=="Y"){C.push(this)}else{w.push(this.link)}break}if(K!==""){I+='<a href="'+this.link+'" class="'+K+'" target="_blank">'+J+"</a>"}});return I===""?"":'\n<div class="ibm-el-info-connect"><p class="ibm-icononly">'+I+"</p></div>"}function x(){var J="",I=unescape(A.data.description.replace(/\\u/g,"%u")),K=I.substr(0,100).lastIndexOf(" ");if(n.applied.aboutmedisplay==="none"){return J}if(n.applied.aboutmedisplay==="full"||I.length<100){J="<p>"+I+"</p>"}else{if(n.applied.aboutmedisplay==="partial"){J="<p>"+I.substr(0,K)+'<span class="ibm-hide">'+I.substr(K)+'</span><span class="ibm-el-readmore-link">... <a href="#" onclick="jQuery(this).parent().siblings(\'.ibm-hide\').removeAttr(\'class\');jQuery(this).parent().remove();return false;">'+s.read_more+"</a></span></p>"}}J='\n<div class="ibm-el-section-about"><h2 class="ibm-bold ibm-rule">'+s.about+"</h2>"+J+"</div>";return J}function D(){var J="",K,I="dynCallback"+Math.floor((Math.random()*999999)+1);if(n.applied.blogdisplay==="none"||w.length===0){return J}K=h("blog",w);window[I]=function(L){y(L)};d.common.util.coreservices.makeRequest("200",I,K);J='\n<div class="ibm-el-section-activity ibm-show-hide ibm-hide ibm-access" data-type="panel"><h2>'+s.rcnt_activity+'</h2><div class="ibm-container-body">'+J+"</div></div>";return J}function y(J){var I="";if(J.blogEntries.length===0){c("#expert-"+A.data.userId+" .ibm-el-section-activity").remove();return}c.each(J.blogEntries,function(){var L=this.summary.substr(0,100).lastIndexOf(" "),K=this.summary.length<100?this.summary:this.summary.substr(0,L);I+='<div class="ibm-el-feed-entry"><h4>'+this.title+"</h4><h5>"+this.published+"</h5><p>"+K+'... <a href="'+this.link+'" target="_blank">'+s.expert_more+"</a></p></div>"});c("#expert-"+A.data.userId+" .ibm-el-section-activity").removeClass("ibm-access").children(".ibm-container-body").html("<div>"+I+"</div>").siblings("h2").one("click",function(){c(this).siblings("div").children("div").carousel({dots:true,arrows:false})})}function z(){var I="";if(n.applied.nolinks||C.length===0){return I}c.each(C,function(){var J=this.linkname.indexOf("||")>0?this.linkname.split("||")[0]:this.linkname;I+='<li><a href="'+this.link+'" class="ibm-external-link" target="_blank">'+J+"</a></li>"});I='\n<div class="ibm-el-section-otherlinks ibm-show-hide ibm-hide" data-type="panel"><h2>'+s.links+'</h2><div class="ibm-container-body"><ul class="ibm-link-list">'+I+"</ul></div></div>";return I}function E(){var I="";if(n.applied.noterms){return I}I='\n<div class="ibm-el-section-terms ibm-show-hide ibm-hide" data-type="panel"><h2>'+s.terms+'</h2><div class="ibm-container-body"><p>'+s.ibm_rspnbl+" "+s.ibm_endorse+" "+s.ibm_remove+"</p></div></div>";return I}return A}}})(jQuery,IBMCore);